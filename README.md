# python_web_hw12_authorization

Домашнее задание #12
В этом домашнем задании мы продолжаем дорабатывать наше REST API приложение из домашнего задания 11.

Задание
Реализуйте механизм аутентификации в приложении;
Реализуйте механизм авторизации с помощью JWT токенов, чтобы все операции с контактами производились только зарегистрированными пользователями;
Пользователь имеет доступ только к своим операциям с контактами;
Общие требования
При регистрации, если пользователь уже существует с таким email, сервер вернет ошибку HTTP 409 Conflict;
Сервер хеширует пароль и не хранит его в открытом виде в базе данных;
В случае успешной регистрации пользователя сервер должен вернуть HTTP статус ответа 201 Created и данные нового пользователя;
Для всех операций POST создания нового ресурса, сервер возвращает статус 201 Created;
При операции POST аутентификация пользователя, сервер принимает запрос с данными пользователя (email, пароль) в теле запроса;
Если пользователь не существует или пароль не совпадает, то возвращается ошибка HTTP 401 Unauthorized;
Механизм авторизации с помощью JWT токенов реализован парой токенов: токена доступа access_token и токен обновления refresh_token;




docker run --name HW11 -p 5432:5432 -e POSTGRES_PASSWORD=1234 -d postgres


alembic revision --autogenerate -m 'Init' 
alembic upgrade head

poetry add python-jose["cryptography"]
poetry add passlib["bcrypt"]
poetry add python-multipart

Закрепим для чего необходимы эти пакеты в нашем приложении:

python-jose["cryptography"] это пакет, который предоставляет функциональность для работы с JSON Web Tokens (JWT) и помогает создавать безопасные токены аутентификации и авторизации для REST API
passlib["bcrypt"] пакет необходим для хеширования паролей пользователей. Хеширование паролей необходимо, чтобы их нельзя было восстановить в исходный вид, даже если данные утекут из базы данных.
python-multipart этот пакет для работы с файлами в формате multipart/form-data, который является основным форматом для загрузки файлов по HTTP, необходим в данном случае для правильной работы FastAPI.